# Kyle Ray
# CPE 631 Advanced Computer Architecture
# Problem 2
# Homework 3
# February 7, 2018

		.data
xarray:	.double 0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9
		.double 1.0, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9
		.double 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.9
		.double 3.0, 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.8, 3.9
		.double 4.0, 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 4.7, 4.8, 4.9
		.double 5.0, 5.1, 5.2, 5.3, 5.4, 5.5, 5.6, 5.7, 5.8, 5.9
		.double 6.0, 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8, 6.9
		.double 7.0, 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7, 7.8, 7.9
		.double 8.0, 8.1, 8.2, 8.3, 8.4, 8.5, 8.6, 8.7, 8.8, 8.9
		.double 9.0, 9.1, 9.2, 9.3, 9.4, 9.5, 9.6, 9.7, 9.8, 9.9

yarray: .double  0.0,  1.0,  2.0,  3.0,  4.0,  5.0,  6.0, 7.0,  8.0,  9.0
		.double 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0
		.double 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0
		.double 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0
		.double 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0
		.double 50.0, 51.0, 52.0, 53.0, 54.0, 55.0, 56.0, 57.0, 58.0, 59.0
		.double 60.0, 61.0, 62.0, 63.0, 64.0, 65.0, 66.0, 67.0, 68.0, 69.0
		.double 70.0, 71.0, 72.0, 73.0, 74.0, 75.0, 76.0, 77.0, 78.0, 79.0
		.double 80.0, 81.0, 82.0, 83.0, 84.0, 85.0, 86.0, 87.0, 88.0, 89.0
		.double 90.0, 91.0, 92.0, 93.0, 94.0, 95.0, 96.0, 97.0, 98.0, 99.0

zarray:	.double 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
		.double 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
		.double 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
		.double 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
		.double 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
		.double 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
		.double 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
		.double 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
		.double 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0
		.double 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0

a:		.double 10.0
len:  	.word 100

		# Loop Preparation
        .text
        dadd 	$t0, $zero,$zero 	# $t0 = 0
        ld 		$t1, len($zero)    	# $t1 = len (array size)
        daddi	$t4, $t0, -1		# $t4 = -1
        dsll 	$t2, $t1,3       	# $t2 = len*8 (800)
        l.d		f10, a($zero)		# f10 = a (10.0) 

m1:		# Perform Computation
		l.d		f4, xarray($t2)	# f4 = x[i]
		l.d		f5, yarray($t2)	# f5 = y[i]
		mul.d   f6, f4, f10		# f6 = a*x[i]
		add.d   f6, f6, f5		# f6 = a*x[i] + y[i]
		mul.d   f7, f5, f10		# f7 = a*y[i]
		s.d		f6, zarray($t2)	# z[i] = a*x[i] + y[i]
		s.d    	f7, yarray($t2)	# y[i] = a*y[i]

		# Update Counters and Indices
		daddi 	$t1, $t1, -1 	#decrement the counter
		daddui 	$t2, $t2, -8 	#update array index
		bne		$t1, $t4, m1	#jump back to the top of the loop
		nop

out:	halt